@page "/Desktop"
@attribute [Authorize(Roles = CommonSense.Roles.HackerRole)]

@inject ILogger<Desktop> logger
@inject IJSRuntime jsRuntime
@inject HttpClient httpClient
@inject IHackSystemAuthenticationStateHandler authenticationStateHandler
@inject IOptionsMonitor<APIConfiguration> optionMonitor
@inject IAuthenticationService authenticationService
@inject IBasicProgramService basicProgramService

<h3>Desktop</h3>
<button class="btn btn-success" @onclick="GetAccountInfo">获取用户信息</button>
<p>@accountInfo</p>

<button class="btn btn-warning" @onclick="RefreshTokenInfo">刷新 Token 信息</button>
<p>@tokenInfo</p>

<AuthorizeView Policy=@WebCommonSense.AuthorizationPolicy.LeonPolicy>
    <h4><span class="badge badge-primary">Leon</span></h4>
</AuthorizeView>

<AuthorizeView Policy=@WebCommonSense.AuthorizationPolicy.ProfessionalHackerPolicy>
    <a class="h4" href="/ProfessionalHackerPage"><span class="badge badge-warning">Professional</span></a>
</AuthorizeView>

<AuthorizeView Policy=@WebCommonSense.AuthorizationPolicy.HackerPolicy>
    <h4><span class="badge badge-dark">Hack</span></h4>
</AuthorizeView>

<a class="btn btn-primary" href="/SystemSettings">系统设置</a>
<h1>Configuration example</h1>
<p>Configuration: @optionMonitor.CurrentValue.APIURL</p>

<div class="btn btn-group">
    <button class="btn btn-outline-primary" @onclick="GetAll">获取所有</button>
    <button class="btn btn-outline-primary" @onclick="Get">获取</button>
    <button class="btn btn-outline-primary" @onclick="Create">创建</button>
    <button class="btn btn-outline-primary" @onclick="Update">更新</button>
    <button class="btn btn-outline-primary" @onclick="Delete">删除</button>
</div>

<p>@programInfo</p>

@code {
    string accountInfo = "账户信息";

    string programInfo = "程序信息";

    string tokenInfo = "Token 信息";
}